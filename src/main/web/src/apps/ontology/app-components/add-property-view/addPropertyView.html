<div class="om-ap-view">

	<h2 class="om-title">{{'addNew.property.title' | translate}}</h2>

	<om-error-list om-errors-already-translated="serverErrors.general" om-errors-to-translate="serverErrors.someListsNotLoaded">
	</om-error-list>

	<form class="form-horizontal" name="apForm" ng-submit="saveProperty($event, property)" novalidate>

		<div ng-class="formGroupClass('omName', 'name')">
			<label for="omName" class="col-sm-2 control-label label-required">{{'formField.name' | translate}}</label>
			<div class="col-sm-7">
				<om-input om-name="omName" om-property="name" om-model="property" om-adding="true" om-required="true" om-max-length="200"></om-input>
				<ng-messages for="apForm.omName.$error" ng-if="apForm.$submitted || apForm.omName.$touched">
					<ng-message when="required"><p class="text-danger">{{'validation.property.nameRequired' | translate}}</p></ng-message>
					<ng-message when="maxlength"><p class="text-danger">{{'validation.tooLong' | translate:'{maxLength: "200"}'}}</p></ng-message>
				</ng-messages>
				<p class="text-danger" ng-hide="apForm.omName.$touched" ng-repeat="error in serverErrors.name">{{error}}</p>
			</div>
		</div>

		<div ng-class="formGroupClass('omDescription', 'description')">
			<label for="omDescription" class="col-sm-2 control-label">{{'formField.description' | translate}}</label>
			<div class="col-sm-7">
				<om-text-area om-name="omDescription" om-property="description" om-model="property" om-adding="true" om-max-length="1024"></om-text-area>
				<ng-messages for="apForm.omDescription.$error" ng-if="apForm.$submitted || apForm.omDescription.$touched">
					<ng-message when="maxlength"><p class="text-danger">{{'validation.tooLong' | translate:'{maxLength: "1024"}'}}</p></ng-message>
				</ng-messages>
				<p class="text-danger" ng-hide="apForm.omDescription.$touched" ng-repeat="error in serverErrors.description">{{error}}</p>
			</div>
		</div>

		<div ng-class="formGroupClass('omClasses', 'classes')">
			<label for="omClasses" class="col-sm-2 control-label label-required">{{'formField.classes' | translate}}</label>
			<div class="col-sm-7">
				<om-tag-select name="omClasses" om-property="classes" ng-model="property" om-options="classes" om-adding="true"></om-tag-select>
				<ng-messages for="apForm.omClasses.$error" ng-if="apForm.$submitted || apForm.omClasses.$touched">
					<ng-message when="emptyValue"><p class="text-danger">{{'validation.property.classesEmpty' | translate}}</p></ng-message>
				</ng-messages>
				<p class="text-danger" ng-hide="apForm.omClasses.$touched" ng-repeat="error in serverErrors.classes">{{error}}</p>
			</div>
		</div>

		<div ng-class="formGroupClass('omOntologyId', 'cropOntologyId')">
			<label for="omOntologyId" class="col-sm-2 control-label">{{'formField.ontologyId' | translate}}</label>
			<div class="col-sm-7">
				<om-input om-name="omOntologyId" om-property="cropOntologyId" om-model="property" om-adding="true" om-max-length="200"></om-input>
				<ng-messages for="apForm.omOntologyId.$error" ng-if="apForm.$submitted || apForm.omOntologyId.$touched">
					<ng-message when="maxlength"><p class="text-danger">{{'validation.tooLong' | translate:'{maxLength: "200"}'}}</p></ng-message>
				</ng-messages>
				<p class="text-danger" ng-hide="apForm.omOntologyId.$touched" ng-repeat="error in serverErrors.cropOntologyId">{{error}}</p>
			</div>
		</div>

		<div class="form-group">
			<div ng-hide="confirmationNecessary" class="col-sm-offset-2 col-sm-7">
				<button class="btn btn-primary" type="submit" data-test="savePropertyButton">
					{{'button.save' | translate}}
					<span ng-show="submitted" class="throbber-btn-wrapper">
						<span class="throbber throbber-btn throbber-white"></span>
					</span>
				</button>
				<a href="#" ng-click="cancel($event)">{{'button.cancel' | translate}}</a>
			</div>
			<div ng-show="confirmationNecessary" class="col-sm-offset-2 col-sm-7">
				<div class="alert alert-danger">{{'warnings.discardConfirmation' | translate}}</div>
				<button class="btn btn-danger" ng-click="confirm($event)">
					{{'button.discard' | translate}}
				</button>
				<a href="#" ng-click="deny($event)">{{'button.continueEditing' | translate}}</a>
			</div>
		</div>
	</form>
</div>
