<div class="card" id="{{tableId}}">
    <div class="card-header d-flex p-2">
        <h5 style="margin-bottom: 0;">
            <span class="p-1" jhiTranslate="{{title}}"></span>
            <label (click)="isListCollapsed = !isListCollapsed"
                   [attr.aria-expanded]="!isListCollapsed" aria-controls="collapsedTable">
                <i [ngClass]="isListCollapsed?'fa fa-caret-right fa-2':'fa fa-caret-down fa-2'" aria-hidden="true"> </i>
            </label>
        </h5>
    </div>
    <div id="isCollapsedTable" [ngbCollapse]="isListCollapsed">
        <div class="card-body d-flex flex-column">
            <div class="row">
                <div class="col">
                    <div class="float-right">
                        <jhi-parent-list-columns *ngIf="germplasmList.length" class="ml-2 float-right" [defaultColumns]="defaultColumns" [nameColumns]="nameColumns"
                                                 [attributesColumns]="attributesColumns" [passportColumns]="passportColumns"
                                                 (columnsSelectedEvent)="onColumnsSelected($event)">
                        </jhi-parent-list-columns>
                        <div class="float-right">
                            <div ngbDropdown class="float-right" placement="bottom-right" #actionMenu="ngbDropdown">
                                <button class="btn btn-info" id="actionMenu" ngbDropdownToggle
                                        jhiTranslate="actions"></button>
                                <div ngbDropdownMenu aria-labelledby="actionMenu">
                                    <button class="dropdown-item" type="submit" jhiTranslate="cross-plan.design.parent-list.action.add.entries"
                                            (click)="SelectEntries()">Add Entries
                                    </button>
                                    <button *ngIf="germplasmList.length" class="dropdown-item" type="submit" jhiTranslate="cross-plan.design.parent-list.action.select.all.entries"
                                            (click)="selectAll()">Select All Entries
                                    </button>
                                    <button *ngIf="germplasmList.length" class="dropdown-item" type="submit" jhiTranslate="cross-plan.design.parent-list.action.remove.selected.entries"
                                            (click)="removeSelected()">Remove Selected Entries
                                    </button>
                                    <button *ngIf="germplasmList.length" class="dropdown-item" type="submit" jhiTranslate="cross-plan.design.parent-list.action.remove.all.entries"
                                            (click)="cleanList()">Remove All Entries
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col">
                    <div class="form-group form-inline">
                        <span class="mr-1 font-weight-bold" jhiTranslate="global.total.entries"></span>
                        <span>{{germplasmList.length}}</span>
                        <span class="ml-3 mr-1 font-weight-bold" jhiTranslate="global.selected"></span>
                        <span>{{isSelectAllPages ? filteredItems : size(selectedItems)}}</span>
                        <div class="form-check form-check-inline ml-3">
                            <input type="checkbox" [checked]="isSelectAllPages" (click)="onSelectAllPages(isSelectAllPages)"
                                   id="list-parent-select-all">
                            <label class="form-check-label ml-1" for="list-parent-select-all"
                                   jhiTranslate="global.select.all"></label>
                        </div>
                        <span *ngIf="isLoading" style="margin-left: 10px;" class="throbber throbber-2x"></span>
                    </div>
                </div>
            </div>
            <br/>
            <div class="table-responsive" *ngIf="germplasmList">
                <table class="table table-striped table-bordered table-curved"
                       *ngIf="germplasmList.length else nodata">
                    <thead>
                    <tr>
                        <th *ngIf="germplasmList.length && !isSelectAllPages"><input type="checkbox" tooltip="select current page" [checked]="isPageSelected()" (click)="onSelectPage()" [title]="'select current page'"></th>
                        <th>#</th>
                        <th [hidden]="hiddenColumns[ColumnLabels.GID]"><span jhiTranslate="cross-plan.design.parent-list.column.gid"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.GERMPLASM_UUID]"><span jhiTranslate="cross-plan.design.parent-list.column.germplasmUUID"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.GROUP_ID]"><span jhiTranslate="cross-plan.design.parent-list.column.groupId"></span><span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.NAMES]"><span jhiTranslate="cross-plan.design.parent-list.column.names"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.AVAILABLE]"><span jhiTranslate="cross-plan.design.parent-list.column.availableBalance"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.LOT_UNITS]"><span jhiTranslate="cross-plan.design.parent-list.column.unit"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.LOTS]"><span jhiTranslate="cross-plan.design.parent-list.column.lotCount"></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.CROSS]"><span jhiTranslate="cross-plan.design.parent-list.column.pedigreeString">CROSS</span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['PREFERRED ID']]"><span jhiTranslate="cross-plan.design.parent-list.column.germplasmPreferredId"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['PREFERRED NAME']]"><span jhiTranslate="cross-plan.design.parent-list.column.germplasmPreferredName">PREFERRED NAME</span><span ></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['GERMPLASM DATE']]"><span jhiTranslate="cross-plan.design.parent-list.column.germplasmDate"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.LOCATION]"><span jhiTranslate="cross-plan.design.parent-list.column.locationName"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels.METHOD_NAME]"><span jhiTranslate="cross-plan.design.parent-list.column.methodName"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['METHOD ABBREV']]"><span jhiTranslate="cross-plan.design.parent-list.column.methodCode"></span><span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['METHOD NUMBER']]"><span jhiTranslate="cross-plan.design.parent-list.column.methodNumber"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['METHOD GROUP']]"><span jhiTranslate="cross-plan.design.parent-list.column.methodGroup"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['FGID']]"><span jhiTranslate="cross-plan.design.parent-list.column.femaleParentGID"></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['CROSS-FEMALE PREFERRED NAME']]"><span jhiTranslate="cross-plan.design.parent-list.column.femaleParentPreferredName"></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['MGID']]"><span jhiTranslate="cross-plan.design.parent-list.column.maleParentGID"></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['CROSS-MALE PREFERRED NAME']]"><span jhiTranslate="cross-plan.design.parent-list.column.maleParentPreferredName"></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE GID']]"><span jhiTranslate="cross-plan.design.parent-list.column.groupSourceGID"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE']]"><span jhiTranslate="cross-plan.design.parent-list.column.groupSourcePreferredName"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE GID']]"><span jhiTranslate="cross-plan.design.parent-list.column.immediateSourceGID"></span> <span></span></th>
                        <th [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE']]"><span jhiTranslate="cross-plan.design.parent-list.column.immediateSourceName"></span> <span></span></th>
                        <ng-container *ngFor="let entry of germplasmList[0].attributeTypesValueMap | keyvalue">
                            <th [hidden]="hiddenColumns[entry.key] || hiddenColumns[entry.key] === undefined"><span>{{entry.key}}</span><span class="fa fa-sort"></span></th>
                        </ng-container>
                        <ng-container *ngFor="let entry of germplasmList[0].nameTypesValueMap | keyvalue">
                            <th [hidden]="hiddenColumns[entry.key] || hiddenColumns[entry.key] === undefined"><span>{{entry.key}}</span><span class="fa fa-sort"></span></th>
                        </ng-container>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let germplasm of germplasmList ;trackBy: trackId; let index = index">
                        <td *ngIf="!isSelectAllPages">
                            <input type="checkbox" [checked]="isSelected(germplasm)" (click)="toggleSelect(germplasm)">
                        </td>
                        <td>{{pageOffset() + index + 1}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels.GID]"><a [href]="this.germplasmDetailsUrlService.getUrl(germplasm.gid)" target="_blank">{{germplasm.gid}}</a></td>
                        <td [hidden]="hiddenColumns[ColumnLabels.GERMPLASM_UUID]"><a [href]="this.germplasmDetailsUrlService.getUrl(germplasm.gid)" target="_blank">{{germplasm.germplasmUUID}}</a></td>
                        <td [hidden]="hiddenColumns[ColumnLabels.GROUP_ID]"><a *ngIf="germplasm.groupId"  [href]="this.germplasmDetailsUrlService.getUrl(germplasm.groupId)" target="_blank">{{germplasm.groupId}}</a><span *ngIf="!germplasm.groupId">-</span></td>
                        <td [hidden]="hiddenColumns[ColumnLabels.NAMES]" jhiScrollableTooltip [tooltipText]="germplasm.names" placement="right"><a [href]="this.germplasmDetailsUrlService.getUrl(germplasm.gid)" target="_blank">{{germplasm.names | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE }}</a></td>
                        <td [hidden]="hiddenColumns[ColumnLabels.AVAILABLE]">{{germplasm.availableBalance}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels.LOT_UNITS]">{{germplasm.unit}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels.LOTS]">{{germplasm.lotCount}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels.CROSS]" jhiScrollableTooltip [tooltipText]="germplasm.pedigreeString" placement="right">{{germplasm.pedigreeString | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['PREFERRED ID']]">{{germplasm.germplasmPreferredId}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['PREFERRED NAME']]" jhiScrollableTooltip [tooltipText]="germplasm.germplasmPreferredName" placement="right">{{germplasm.germplasmPreferredName  | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['GERMPLASM DATE']]">{{germplasm.germplasmDate}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels.LOCATION]"><a [routerLink]="['/', { outlets: { popup: 'location/' + germplasm.locationId } }]">{{germplasm.locationName}}</a></td>
                        <td [hidden]="hiddenColumns[ColumnLabels.METHOD_NAME]"><a [routerLink]="['/', { outlets: { popup: 'breeding-method/' + germplasm.breedingMethodId } }]">{{germplasm.methodName}}</a></td>
                        <td [hidden]="hiddenColumns[ColumnLabels['METHOD ABBREV']]">{{germplasm.methodCode}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['METHOD NUMBER']]">{{germplasm.methodNumber}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['METHOD GROUP']]">{{germplasm.methodGroup}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['FGID']]">{{germplasm.femaleParentGID}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['CROSS-FEMALE PREFERRED NAME']]" jhiScrollableTooltip [tooltipText]="germplasm.femaleParentPreferredName" placement="bottom">{{germplasm.femaleParentPreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['MGID']]">{{germplasm.maleParentGID}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['CROSS-MALE PREFERRED NAME']]" jhiScrollableTooltip [tooltipText]="germplasm.maleParentPreferredName" placement="bottom">{{germplasm.maleParentPreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE GID']]">{{germplasm.groupSourceGID}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE']]" jhiScrollableTooltip [tooltipText]="germplasm.groupSourcePreferredName" placement="bottom">{{germplasm.groupSourcePreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE GID']]">{{germplasm.immediateSourceGID}}</td>
                        <td [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE']]" jhiScrollableTooltip [tooltipText]="germplasm.immediateSourcePreferredName" placement="bottom">{{germplasm.immediateSourceName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
                        <ng-container *ngFor="let entry of germplasm.attributeTypesValueMap | keyvalue">
                            <td [hidden]="hiddenColumns[entry.key] || hiddenColumns[entry.key] === undefined">{{entry.value}}</td>
                        </ng-container>
                        <ng-container *ngFor="let entry of germplasm.nameTypesValueMap | keyvalue">
                            <td [hidden]="hiddenColumns[entry.key] || hiddenColumns[entry.key] === undefined">{{entry.value}}</td>
                        </ng-container>
                    </tr>
                    </tbody>
                </table>
                <ng-template #nodata>
                    <table class="table table-striped table-bordered table-curved">
                        <thead>
                        <tr>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td jhiTranslate="cross-plan.design.no.data.added"></td>
                        </tr>
                        </tbody>
                    </table>
                </ng-template>
            </div>
            <div *ngIf="germplasmList && germplasmList.length">
                <div class="row">
                    <div class="col">
                        <div class="pagination-container">
                            <div class="pagination-box pagination-box-left">
                                <div>
                                    <jhi-item-count [page]="page" [total]="filteredItems" [itemsPerPage]="itemsPerPage" >
                                    </jhi-item-count>
                                </div>
                            </div>
                            <div class="pagination-box pagination-wrap">
                                <ngb-pagination [collectionSize]="filteredItems" [(page)]="page" [pageSize]="itemsPerPage"
                                                [disabled]="isLoading" [maxSize]="5" [rotate]="true" (pageChange)="loadPage(page)">
                                </ngb-pagination>
                            </div>
                            <div class="pagination-box pagination-box-right">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
