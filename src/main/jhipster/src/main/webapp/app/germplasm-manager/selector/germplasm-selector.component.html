<div>
	<jhi-column-filter [request]="request" [resultSearch]="resultSearch" [filters]="filters"></jhi-column-filter>
	<br/>
	<div class="row">
		<div class="col">
			<div style="float: right">
				<button class="btn btn-light" #colVisPopOver="ngbPopover" [ngbPopover]="columnvisibility" [placement]="['bottom-right']" [autoClose]="'outside'">
					<i class="fa fa-th" aria-hidden="true"></i>
				</button>
			</div>
			<ng-template #columnvisibility>
				<div id="columnVisibility">
					<jhi-col-vis-button [colName]="ColumnLabels.GID" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.gid"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['GROUP ID']" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.groupId"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels.NAMES" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.names"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['METHOD NAME']" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.methodName"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels.AVAILABLE" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.availableBalance"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels.LOT_UNITS" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.unit"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels.LOTS" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.lotCount"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels.CROSS" [hiddenColumns]="hiddenColumns" (click)="colVisPopOver.close()"><span jhiTranslate="search-germplasm.column.pedigreeString"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['PREFERRED ID']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['PREFERRED ID']], ColumnLabels['PREFERRED ID'])"><span jhiTranslate="search-germplasm.column.germplasmPreferredId"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['PREFERRED NAME']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['PREFERRED NAME']], ColumnLabels['PREFERRED NAME'])"><span jhiTranslate="search-germplasm.column.germplasmPreferredName"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['GERMPLASM DATE']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['GERMPLASM DATE']], ColumnLabels['GERMPLASM DATE'])"><span jhiTranslate="search-germplasm.column.germplasmDate"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels.LOCATIONS" [hiddenColumns]="hiddenColumns"><span jhiTranslate="search-germplasm.column.locationName"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['METHOD ABBREV']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['METHOD ABBREV']], ColumnLabels['METHOD ABBREV'])"><span jhiTranslate="search-germplasm.column.methodCode"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['METHOD NUMBER']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['METHOD NUMBER']], ColumnLabels['METHOD NUMBER'])"><span jhiTranslate="search-germplasm.column.methodNumber"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['METHOD GROUP']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['METHOD GROUP']], ColumnLabels['METHOD GROUP'])"><span jhiTranslate="search-germplasm.column.methodGroup"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['FGID']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['FGID']], ColumnLabels['FGID'])"><span jhiTranslate="search-germplasm.column.femaleParentGID"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['CROSS-FEMALE PREFERRED NAME']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['CROSS-FEMALE PREFERRED NAME']], ColumnLabels['CROSS-FEMALE PREFERRED NAME'])"><span jhiTranslate="search-germplasm.column.femaleParentPreferredName"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['MGID']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['MGID']], ColumnLabels['MGID'])"><span jhiTranslate="search-germplasm.column.maleParentGID"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['CROSS-MALE PREFERRED NAME']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['CROSS-MALE PREFERRED NAME']], 'CROSS-MALE PREFERRED NAME')"><span jhiTranslate="search-germplasm.column.maleParentPreferredName"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['GROUP SOURCE GID']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['GROUP SOURCE GID']], ColumnLabels['GROUP SOURCE GID'])"><span jhiTranslate="search-germplasm.column.groupSourceGID"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['GROUP SOURCE']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['GROUP SOURCE']], ColumnLabels['GROUP SOURCE'])"><span jhiTranslate="search-germplasm.column.groupSourcePreferredName"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['IMMEDIATE SOURCE GID']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['IMMEDIATE SOURCE GID']], ColumnLabels['IMMEDIATE SOURCE GID'])"><span jhiTranslate="search-germplasm.column.immediateSourceGID"></span></jhi-col-vis-button>
					<jhi-col-vis-button [colName]="ColumnLabels['IMMEDIATE SOURCE']" [hiddenColumns]="hiddenColumns" (onToggle)="toggleAdditionalColumn(!hiddenColumns[ColumnLabels['IMMEDIATE SOURCE']], ColumnLabels['IMMEDIATE SOURCE'])"><span jhiTranslate="search-germplasm.column.immediateSourcePreferredName"></span></jhi-col-vis-button>
				</div>
			</ng-template>
			<div class="form-group form-inline">
				<jhi-item-count-custom [page]="page" [total]="filteredItems" [itemsPerPage]="itemsPerPage"
										   [limit]="5000"></jhi-item-count-custom>
				<span style="margin-left: 20px;">Selected:</span>
				<span style="padding-left: 5px;" class="font-weight-bold">
					{{isSelectAllPages ? (+filteredItems + (germplasmList.length > filteredItems ? germplasmList.length - filteredItems : 0)) : selectedItems.length}}
				</span>
				<div *ngIf="selectMultiple" class="form-check form-check-inline" style="margin-left: 20px;">
					<input type="checkbox" tooltip="Select all pages" [checked]="isSelectAllPages" (click)="onSelectAllPages(isSelectAllPages)" id="check-select-all" name="check-select-all">
					<label class="form-check-label" for="check-select-all" style="padding-left: 5px;">
						Select all pages
					</label>
				</div>
				<div style="margin-left: 10px;">
					<a href (click)="onClearSort($event)" jhiTranslate="global.clear-sort"></a>
				</div>
				<span *ngIf="isLoading" style="margin-left: 10px;" class="throbber throbber-2x"></span>
			</div>
		</div>
	</div>
	<br/>
	<div class="table-responsive" *ngIf="germplasmList">
		<table class="table table-striped table-bordered table-curved" *ngIf="germplasmList.length else nodata" data-test="germplasmSelectorTable">
			<thead>
			<tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse" [callback]="sort.bind(this)">
				<th *ngIf="!isSelectAllPages"><input *ngIf="selectMultiple" type="checkbox" tooltip="select current page" [checked]="isPageSelected()" (click)="onSelectPage()" [title]="'select current page'" data-test="selectAllCurrentPage"></th>
				<th [jhiSortBy]="ColumnLabels.GID" [hidden]="hiddenColumns[ColumnLabels.GID]"><span jhiTranslate="search-germplasm.column.gid"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['GROUP ID']" [hidden]="hiddenColumns[ColumnLabels['GROUP ID']]"><span jhiTranslate="search-germplasm.column.groupId"></span><span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels.NAMES" [hidden]="hiddenColumns[ColumnLabels.NAMES]"><span jhiTranslate="search-germplasm.column.names"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels.AVAILABLE" [hidden]="hiddenColumns[ColumnLabels.AVAILABLE]"><span jhiTranslate="search-germplasm.column.availableBalance"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels.LOT_UNITS" [hidden]="hiddenColumns[ColumnLabels.LOT_UNITS]"><span jhiTranslate="search-germplasm.column.unit"></span> <span class="fa fa-sort"></span></th>
				<th [hidden]="hiddenColumns[ColumnLabels.LOTS]"><span jhiTranslate="search-germplasm.column.lotCount"></span></th>
				<th [hidden]="hiddenColumns[ColumnLabels.CROSS]"><span jhiTranslate="search-germplasm.column.pedigreeString">CROSS</span></th>
				<th [jhiSortBy]="ColumnLabels['PREFERRED ID']" [hidden]="hiddenColumns[ColumnLabels['PREFERRED ID']]"><span jhiTranslate="search-germplasm.column.germplasmPreferredId"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['PREFERRED NAME']" [hidden]="hiddenColumns[ColumnLabels['PREFERRED NAME']]"><span jhiTranslate="search-germplasm.column.germplasmPreferredName">PREFERRED NAME</span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['GERMPLASM DATE']" [hidden]="hiddenColumns[ColumnLabels['GERMPLASM DATE']]"><span jhiTranslate="search-germplasm.column.germplasmDate"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels.LOCATIONS" [hidden]="hiddenColumns[ColumnLabels.LOCATIONS]"><span jhiTranslate="search-germplasm.column.locationName"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['METHOD NAME']" [hidden]="hiddenColumns[ColumnLabels['METHOD NAME']]"><span jhiTranslate="search-germplasm.column.methodName"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['METHOD ABBREV']" [hidden]="hiddenColumns[ColumnLabels['METHOD ABBREV']]"><span jhiTranslate="search-germplasm.column.methodCode"></span><span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['METHOD NUMBER']" [hidden]="hiddenColumns[ColumnLabels['METHOD NUMBER']]"><span jhiTranslate="search-germplasm.column.methodNumber"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['METHOD GROUP']" [hidden]="hiddenColumns[ColumnLabels['METHOD GROUP']]"><span jhiTranslate="search-germplasm.column.methodGroup"></span> <span class="fa fa-sort"></span></th>
				<th [hidden]="hiddenColumns[ColumnLabels['FGID']]"><span jhiTranslate="search-germplasm.column.femaleParentGID"></span></th>
				<th [hidden]="hiddenColumns[ColumnLabels['CROSS-FEMALE PREFERRED NAME']]"><span jhiTranslate="search-germplasm.column.femaleParentPreferredName"></span></th>
				<th [hidden]="hiddenColumns[ColumnLabels['MGID']]"><span jhiTranslate="search-germplasm.column.maleParentGID"></span></th>
				<th [hidden]="hiddenColumns[ColumnLabels['CROSS-MALE PREFERRED NAME']]"><span jhiTranslate="search-germplasm.column.maleParentPreferredName"></span></th>
				<th [jhiSortBy]="ColumnLabels['GROUP SOURCE GID']" [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE GID']]"><span jhiTranslate="search-germplasm.column.groupSourceGID"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['GROUP SOURCE']" [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE']]"><span jhiTranslate="search-germplasm.column.groupSourcePreferredName"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['IMMEDIATE SOURCE GID']" [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE GID']]"><span jhiTranslate="search-germplasm.column.immediateSourceGID"></span> <span class="fa fa-sort"></span></th>
				<th [jhiSortBy]="ColumnLabels['IMMEDIATE SOURCE']" [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE']]"><span jhiTranslate="search-germplasm.column.immediateSourcePreferredName"></span> <span class="fa fa-sort"></span></th>
				<ng-container *ngIf="germplasmList[0]">
					<th *ngFor="let entry of germplasmList[0].attributeTypesValueMap | keyvalue" jhiSortBy="{{entry.key}}"><span>{{entry.key}}</span><span class="fa fa-sort"></span></th>
				</ng-container>
				<ng-container *ngIf="germplasmList[0]">
					<th *ngFor="let entry of germplasmList[0].nameTypesValueMap | keyvalue" jhiSortBy="{{entry.key}}"><span>{{entry.key}}</span><span class="fa fa-sort"></span></th>
				</ng-container>
			</tr>
			</thead>
			<tbody>
			<tr *ngFor="let germplasm of germplasmList ;trackBy: trackId">
				<td *ngIf="!isSelectAllPages">
					<input *ngIf="selectMultiple" type="checkbox" [checked]="isSelected(germplasm)" (click)="toggleSelect(germplasm)">
					<input *ngIf="!selectMultiple" type="radio" name="gid-option-group" [checked]="isSelected(germplasm)" (click)="toggleSelect(germplasm)">
				</td>
				<td [hidden]="hiddenColumns[ColumnLabels.GID]"><a [href]="this.germplasmDetailsUrlService.getUrl(germplasm.gid)" target="_blank">{{germplasm.gid}}</a></td>
				<td [hidden]="hiddenColumns[ColumnLabels['GROUP ID']]"><a *ngIf="germplasm.groupId"  [href]="this.germplasmDetailsUrlService.getUrl(germplasm.groupId)" target="_blank">{{germplasm.groupId}}</a><span *ngIf="!germplasm.groupId">-</span></td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.names" placement="right" [hidden]="hiddenColumns[ColumnLabels.NAMES]"><a [href]="this.germplasmDetailsUrlService.getUrl(germplasm.gid)" target="_blank">{{germplasm.names | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE }}</a></td>
				<td [hidden]="hiddenColumns[ColumnLabels.AVAILABLE]">{{germplasm.availableBalance}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels.LOT_UNITS]">{{germplasm.unit}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels.LOTS]">{{germplasm.lotCount}}</td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.pedigreeString" placement="right" [hidden]="hiddenColumns[ColumnLabels.CROSS]">{{germplasm.pedigreeString | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['PREFERRED ID']]">{{germplasm.germplasmPreferredId}}</td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.germplasmPreferredName" placement="right" [hidden]="hiddenColumns[ColumnLabels['PREFERRED NAME']]">{{germplasm.germplasmPreferredName  | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['GERMPLASM DATE']]">{{germplasm.germplasmDate}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels.LOCATIONS]"><a [routerLink]="['/', { outlets: { popup: 'location/' + germplasm.locationId } }]">{{germplasm.locationName}}</a></td>
				<td [hidden]="hiddenColumns[ColumnLabels['METHOD NAME']]"><a [routerLink]="['/', { outlets: { popup: 'breeding-method/' + germplasm.breedingMethodId } }]">{{germplasm.methodName}}</a></td>
				<td [hidden]="hiddenColumns[ColumnLabels['METHOD ABBREV']]">{{germplasm.methodCode}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['METHOD NUMBER']]">{{germplasm.methodNumber}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['METHOD GROUP']]">{{germplasm.methodGroup}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['FGID']]">{{germplasm.femaleParentGID}}</td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.femaleParentPreferredName" placement="right" [hidden]="hiddenColumns[ColumnLabels['CROSS-FEMALE PREFERRED NAME']]">{{germplasm.femaleParentPreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['MGID']]">{{germplasm.maleParentGID}}</td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.maleParentPreferredName" placement="right" [hidden]="hiddenColumns[ColumnLabels['CROSS-MALE PREFERRED NAME']]">{{germplasm.maleParentPreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE GID']]">{{germplasm.groupSourceGID}}</td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.groupSourcePreferredName" placement="right" [hidden]="hiddenColumns[ColumnLabels['GROUP SOURCE']]">{{germplasm.groupSourcePreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
				<td [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE GID']]">{{germplasm.immediateSourceGID}}</td>
				<td jhiScrollableTooltip [tooltipText]="germplasm.immediateSourcePreferredName" placement="right" [hidden]="hiddenColumns[ColumnLabels['IMMEDIATE SOURCE']]">{{germplasm.immediateSourcePreferredName | truncateWithEllipsis:MAX_NAME_DISPLAY_SIZE}}</td>
				<td *ngFor="let entry of germplasm.attributeTypesValueMap | keyvalue">{{entry.value}}</td>
				<td *ngFor="let entry of germplasm.nameTypesValueMap | keyvalue">{{entry.value}}</td>
			</tr>
			</tbody>
		</table>
		<ng-template #nodata>
			<table class="table table-striped table-bordered table-curved">
				<thead>
				<tr>
					<th></th>
				</tr>
				</thead>
				<tbody>
				<tr>
					<td jhiTranslate="no.data"></td>
				</tr>
				</tbody>
			</table>
		</ng-template>
	</div>
	<div *ngIf="germplasmList && germplasmList.length">
		<div class="row">
			<div class="col">
				<div class="pagination-container">
					<div class="pagination-box pagination-box-left">
						<div>
							<jhi-item-count-custom [page]="page" [total]="filteredItems" [itemsPerPage]="itemsPerPage"
													   [limit]="5000"></jhi-item-count-custom>
						</div>
					</div>
					<div class="pagination-box">
						<ngb-pagination [collectionSize]="filteredItems" [(page)]="page" [pageSize]="itemsPerPage" [disabled]="isLoading"
										[maxSize]="5" [rotate]="true" (pageChange)="loadPage(page)"></ngb-pagination>
					</div>
					<div class="pagination-box pagination-box-right">
						<div class="form-inline">
							<label for="itemsPerPage" class="control-label control-label-left">Items Per Page</label>
							<select [(ngModel)]="itemsPerPage" class="form-control ml-2" id="itemsPerPage" [disabled]="isLoading" (change)="resetTable()" style="width:95px">
								<option value="10">10</option>
								<option value="25">25</option>
								<option value="50">50</option>
								<option value="75">75</option>
								<option value="100">100</option>
							</select>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<jhi-alert ></jhi-alert>
		<button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cancel()">
            <span jhiTranslate="entity.action.cancel">Cancel</span>
        </button>
		<button data-test="selectButton" (click)="selectGermplasm()" [disabled]="!isSelectAllPages && selectedItems.length == 0" class="btn btn-primary">
			<span jhiTranslate="entity.action.select">Select</span>
		</button>
	</div>
</div>
